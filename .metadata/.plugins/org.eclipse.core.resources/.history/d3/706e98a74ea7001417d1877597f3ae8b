package gravitation1;

public class RunGravitation {

	private static final double timeIncrement = 50000;
	private static final int nIncrements = 200;
	
	private static final double EARTH_MASS = 5.972 * Math.pow(10, 24);
	private static final double MOON_MASS = 7.3476739 * Math.pow(10, 22);
	
	private static final double DISTANCE_EARTH_MOON = 385000000;
	
	private static final double MOON_VELOCITY = 1023; //m per second
	private static final double EARTH_RADIUS = 6371000;
	//private static final double EARTH_RADIUS = DISTANCE_EARTH_MOON/2;
	
	private static final double smallIncrement = 63710*2;
	//private static final double smallIncrement = DISTANCE_EARTH_MOON/50;
	private static final double massRatio = Math.PI/6;
	

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//level1();
		//level2();
		//level3();
		level3PartII();
		//challenge();
	}
	
	public static void level1()
	{
		GravitationEngine universe = new GravitationEngine(System.out);
		universe.addProjectile(new PointProjectile(new Vector3(), new Vector3(), EARTH_MASS, "Earth"));
		universe.addProjectile(new PointProjectile(new Vector3(DISTANCE_EARTH_MOON, 0, 0), new Vector3(0, MOON_VELOCITY, 0), MOON_MASS, "Moon"));
		System.out.println(universe.header());
		universe.run(timeIncrement, nIncrements, true);
	}
	
	public static void level2()
	{
		
		GravitationEngine universe = new GravitationEngine(System.out);
		ExtendedProjectile earth = new ExtendedProjectile("Earth");
		for(int i = 0; i <= EARTH_RADIUS; i+=smallIncrement)
		{
			for(int j = 0; j <= EARTH_RADIUS; j+=smallIncrement)
			{
				for(int k = 0; k <= EARTH_RADIUS; k+=smallIncrement)
				{
					double xPosition = i*(DISTANCE_EARTH_MOON/EARTH_RADIUS) - (DISTANCE_EARTH_MOON);
					double yPosition = j - (EARTH_RADIUS)/2;
					double zPosition = k - (EARTH_RADIUS)/2;
					double mass = EARTH_MASS/(Math.pow(EARTH_RADIUS/smallIncrement, 3));
					earth.addProjectile(new PointProjectile(new Vector3(xPosition, yPosition, zPosition), new Vector3(), mass, ""));
				}
			}
		}
		universe.addProjectile(earth);
		universe.addProjectile(new PointProjectile(new Vector3(DISTANCE_EARTH_MOON, 0, 0), new Vector3(0, MOON_VELOCITY, 0), MOON_MASS, "Moon"));
		System.out.println(universe.header());
		universe.run(timeIncrement, nIncrements, true);

	}
	
	public static void level3()
	{
		GravitationEngine universe = new GravitationEngine(System.out);
		ExtendedProjectile earth = new ExtendedProjectile("Earth");
		for(int i = 0; i <= 2*EARTH_RADIUS; i+=smallIncrement)
		{
			for(int j = 0; j <= 2*EARTH_RADIUS; j+=smallIncrement)
			{
				for(int k = 0; k <= 2*EARTH_RADIUS; k+=smallIncrement)
				{
					double xPosition = i - EARTH_RADIUS;
					double yPosition = j - EARTH_RADIUS;
					double zPosition = k - EARTH_RADIUS;
					double mass = EARTH_MASS/(Math.pow(2*EARTH_RADIUS/smallIncrement, 3)*massRatio);
					if (new Vector3(xPosition, yPosition, zPosition).magnitude() <= EARTH_RADIUS)
					{
						earth.addProjectile(new PointProjectile(new Vector3(xPosition, yPosition, zPosition), new Vector3(), mass, ""));
					}
				}
			}
		}
		universe.addProjectile(earth);
		universe.addProjectile(new PointProjectile(new Vector3(DISTANCE_EARTH_MOON, 0, 0), new Vector3(0, MOON_VELOCITY, 0), MOON_MASS, "Moon"));
		System.out.println(universe.header());
		universe.run(timeIncrement, nIncrements, true);
	}
	
	public static void level3PartII()
	{
		GravitationEngine universe = new GravitationEngine(System.out);
		ExtendedProjectile earth = new ExtendedProjectile("Earth");
		for(int i = 0; i <= 2*EARTH_RADIUS; i+=smallIncrement)
		{
			for(int j = 0; j <= 2*EARTH_RADIUS; j+=smallIncrement)
			{
				for(int k = 0; k <= 2*EARTH_RADIUS; k+=smallIncrement)
				{
					double xPosition = i - EARTH_RADIUS;
					double yPosition = j - EARTH_RADIUS;
					double zPosition = k - EARTH_RADIUS;
					double mass = EARTH_MASS/(Math.pow(2*EARTH_RADIUS/smallIncrement, 3)*massRatio*2);
					Vector3 displacement = new Vector3(xPosition, yPosition, zPosition);
					if (displacement.magnitude() <= EARTH_RADIUS && displacement.magnitude() > EARTH_RADIUS/Math.pow(2, 1/3))
					{
						earth.addProjectile(new PointProjectile(displacement, new Vector3(), mass, ""));
					}
				}
			}
		}
		universe.addProjectile(earth);
		universe.addProjectile(new PointProjectile(new Vector3(0, 0, 0), new Vector3(0, 0, 0), MOON_MASS, "Moon"));
		System.out.println(universe.header());
		universe.run(timeIncrement, nIncrements, true);
	}
	
	public static void challenge()
	{
	}
}
